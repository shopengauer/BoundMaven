<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./../admin.xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core">
 
    <ui:define name="mainContent">
        
        <p:layout> 

            <h:form id="dataTableForm"> 
                <p:layoutUnit position="center">   

                    <p:dataTable id="dataTable" var="dep" value="#{departmentBean.allDepartment}" paginator="true"
                                 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                 rowsPerPageTemplate="5,10,15,20,30" selection="#{departmentBean.selectedDepartments}" rowKey="#{dep.id}"  editable="true">

                       
                         <p:ajax event="rowEdit" listener="#{departmentBean.onRowEdit}" update=":#{p:component('messages')}"/>
                        <p:ajax event="rowEditCancel" listener="#{departmentBean.onRowCancel}" update=":#{p:component('dataTable')},:#{p:component('messages')}"/>
                        
                        
                        <p:column selectionMode="multiple" style="width:16px;text-align:center"/>
                        
                       
                        
                        <p:column headerText="id">
                            <p:link value="#{dep.id}" outcome="departmentInfo">
                                <f:param name="depName" value="#{dep.departmentName}"/>
                            </p:link>
                        </p:column>

                        <p:column headerText="#{msgs.department}">
                            <p:cellEditor>
                                <f:facet name="output"><h:outputText value="#{dep.departmentName}"/></f:facet>
                                <f:facet name="input"><p:inputText value="#{dep.departmentName}" style="width:100%"/></f:facet>
                            </p:cellEditor> 
                        </p:column>
                        
                        
                        <p:column headerText="#{msgs.desc}">
                            <p:cellEditor>
                                <f:facet name="output"><h:outputText value="#{dep.description}" /></f:facet>
                                <f:facet name="input"><p:inputText value="#{dep.description}" style="width:100%"/></f:facet>
                            </p:cellEditor>
                        </p:column>

                        <p:column headerText="#{msgs.desc}">
                            <h:outputText value="#{dep.ctime.insertTime}" />
                        </p:column>
 
                        <p:column style="width:32px">
                            <p:rowEditor/>
                        </p:column>                            

                        <!--                   <f:facet name="footer">
                                            <p:commandButton id = "delDepBtn"  actionListener="{departmentBean.deleteDepartmentListener}" update=":{p:component('dataTable')},:{p:component('messages')}"  
                                                                 value="{msgs.delete}"/> 
                                            </f:facet> 
                        -->
                    </p:dataTable>


                </p:layoutUnit>
<!--                <p:layoutUnit position="west">
                    <p:commandButton id = "delDepBtn"  actionListener="{departmentBean.deleteDepartmentListener}" update=":{p:component('dataTable')},:{p:component('messages')}"  
                                     value="{msgs.delete}" process=":{p:component('dataTable')},@this"/> 

                </p:layoutUnit>     -->



                <p:layoutUnit position="south" id = "south">   
                    <h:panelGrid columns="6"  > 
                        <p:inputText id="depName" placeholder="#{msgs.department}" value="#{departmentBean.departmentName}"/> 
                        <p:inputText id ="depDesc" placeholder="#{msgs.desc}"
                                     value="#{departmentBean.description}"/>
                        <p:commandButton id = "createDepBtn" update=":#{p:component('dataTable')},:#{p:component('depName')},:#{p:component('depDesc')},:#{p:component('messages')}"  
                                         value="#{msgs.create}" actionListener="#{departmentBean.createDepartmentListener}"/> 
                        
                        <p:commandButton id = "delDepBtn"  actionListener="#{departmentBean.deleteDepartmentListener}" update=":#{p:component('dataTable')},:#{p:component('messages')}"  
                                     value="#{msgs.delete}" process=":#{p:component('dataTable')},@this"/> 
                   </h:panelGrid>
                </p:layoutUnit>  

            </h:form>
        </p:layout>
    </ui:define>
   
    
<!--    <ui:define name="westContent">
        <p:layoutUnit position="west" header="{msgs.create}"  rendered="false">
            
        </p:layoutUnit>  
    </ui:define> -->

    
</ui:composition>
